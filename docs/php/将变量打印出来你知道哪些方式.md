# 将变量打印出来，你知道哪些方式？

> 本文主要从 PHP 输出的角度，系统的介绍常见的变量打印方式。你肯定都见过，但是肯定没有系统总结过。全文共计 2533 字，作者：凌枫。如果文章对你有帮助，请关注和转发，谢谢！

## 一、关键字输出语句

### 1、echo 关键字

PHP 中最常见、最高效的输出语句。echo 不是函数，而是语言结构，可以不使用括号。可以输出一个或多个参数，没有额外的换行符或者空格。echo 没有返回值，因此不能在表达式的上下文中使用。

### 2、print 关键字

print 同样不是函数，而是语言结构。可以输出一个字符串，并始终返回 1，因此可用于表达式。和 echo 最主要的区别是 print 仅接受一个参数。效率略低于 echo。

```php
print 'hello';
if ($expr && print 'foo') {} // 可用于表达式
$result = print 'hello'; // 输出hello，且$result的值为1
echo $result; // 输出1
```

### 3、echo 和 print 如何选择

绝大多数情况下使用 echo，因为它相对更灵活，可一次输出多个参数，且速度极微地快一点。只有在需要利用其返回值 1 的极特殊场景下，如：作为三元运算符的一部分，才会使用 print，这时候若换成 echo 则会报错。

```php
$isHello = true;
$result = $isHello ? print 'hello' : print 'world'; // 使用print作为三元运算符的一部分
echo "\n result: $result"; // 输出 hello result: 1
```

## 二、调试输出函数

### 1、print_r()函数

以人类易读的形式打印显示变量的信息。对于字符串、整数等简单类型，会直接输出值。对于数组和对象，会以缩进的格式显示其键和值，层次结构非常清晰。第二的可选参数设置为 true，则会将结果作为字符串返回，而不直接输出，常常用在处理响应体或者日志。

在命中行终端(CLI)和网页浏览器之间的差异。首先 print\_r 函数本身在这两种模式下是完全一致的，而命令行似乎被格式化好了，而网页浏览器却没有格式化，二者差异主要在于网页浏览器是一个 HTML 渲染引擎。所以在浏览器下需要通过 echo 提前输出\<pre>并在 print\_r 之前。

```php
$arr = ['a', 'b', 'c'];
echo '<pre>'; // 网页浏览器需要加上这个
print_r($arr);
// print_r($arr, true); // 无输出，直接返回
// 输出结果
Array
(
    [0] => a
    [1] => b
    [2] => c
)
```

### 2、var_dump()函数

PHP 中功能最强大的调试函数。用于输出一个或多个表达式的结构信息，包括表达式的类型和长度及值，对于数组或对象将递归按层级展开所有元素，并通过缩进显示其结构。没有返回选项，总是直接输出，如果结构特别复杂输出的信息会特别长。

```php
$age = 24;
$people = 'phper';
$arr = ['a', 'b', 'c'];
echo '<pre>';
var_dump($age, $people, $arr);
// 输出结果
int(24)
string(5) "phper"
array(3) {
  [0]=>
  string(1) "a"
  [1]=>
  string(1) "b"
  [2]=>
  string(1) "c"
}
```

### 3、var\_export()函数

输出或返回变量的可解析字符串表示。其输出是合法的 PHP 代码，可以直接复制到程序中使用。第二个参数为 true 时，会返回字符串而不是直接输出，这个特性使其非常适合用于缓存或序列化数据。

```php
$arr = ['a', 'b', 'c'];
var_export($arr);
// 输出结果
array (
    0 => 'a',
    1 => 'b',
    2 => 'c',
)
```

## 三、特殊输出场景

### 1、printf() 和 sprintf()

二者均用于格式化字符串输出。printf 会直接输出，sprintf 不会直接输出。sprintf 常常用于按顺序用参数替换格式字符串的占位符，简单理解 sprintf 里面第一个包含的相当于一个模板，可以非常直观的看到最终的效果。

```php
$name = '凌枫';
$age = 24;
printf("name:%s age:%d", $name, $age); // 输出 name:凌枫 age:24
echo sprintf("name:%s age:%d", $name, $age); // 输出 name:凌枫 age:24
$message = sprintf("my name is %s and i am %d years old", $name, $age); // 直观看到最终效果
```

### 2、JSON 输出方式

一般在 Web 服务器可以看到。这种方式并非直接进行内容输出，而是先在输出主体内容之前，先告诉浏览器要输出的内容是 JSON 数据，再进行 JSON 编码，紧接着才输出内容本身。

```php
header('Content-Type: application/json');
echo json_encode(['success' => true]);
exit;
```

## 四、总结和对比

综上所述，要将变量打印出来，上面一共列举了 8 种，分四大类：关键字、输出函数、格式化、JSON 输出。下面我们再通过一张表格，做一个简单的对比。

|序号|输出类别|输出方式|主要用途|返回值|常用指数|
|---|---|---|---|---|----|
|1|关键字    | echo                 | 输出一个或多个字符串        | 无                  | ✳️✳️✳️✳️✳️ |
|2|关键字    | print                | 输出一个字符串           | 始终返回 1             | ✳️         |
|3|输出函数  | print_r()           | 调试，打印变量           | 可选返回               | ✳️         |
|4|输出函数  | var_dump()          | 深度调试，打印类型和值       | 无                  | ✳️✳️✳️✳️✳️ |
|5|输出函数  | var_export()        | 调试/缓存，生成合法 PHP 代码 | 可选返回               | ✳️✳️✳️     |
|6|格式化   | printf() / sprintf() | 格式化字符串输出          | printf 无，sprintf 有 | ✳️✳️       |
|7|JSON 输出| json 输出方式            | Web 服务器输出         | 无                  | ✳️✳️✳️✳️✳️ |

如果文章对你有帮助，请关注和转发，谢谢！

![qr](../assets/qr.png)